# 设置访问模式

云数据库 Percona 支持标准模式和高安全模式两种访问模式，默认为标准模式，您可以根据业务情况选择是否开启高安全模式。

**标准模式：**响应时间短，但没有 SQL 审计和拦截的能力。

**高安全模式：**具备一定的 SQL 拦截能力（通过分析永真表达式、关键系统函数等来实现防御 SQL 注入攻击），并可开启 SQL 审计，但会增加一定的响应时间。

## 注意事项

* 
在切换访问模式时，数据库服务可能会出现闪断。为避免闪断影响业务，请尽量在业务低峰时执行操作，或确保您的应用有自动重连机制。

## 操作步骤

1、登录[云数据库 RDS 管理控制台](https://rds-console.jdcloud.com/database) []()。

2、 选择需要更换访问模式的目标实例，点击目标实例，进入实例详情页 ，点击右上角操作**开** **启高安全模式** （或关闭高安全模式），弹窗如下图所示。

* 
点击 **确定**按钮，确定开启高安全模式。
* 
点击 **取消** 按钮，放弃开启高安全模式。

![image2018-3-9 16_15_26.png](https://img1.jcloudcs.com/cms/091f03bf-2db8-4e80-b24a-5b110b83bce720180319113942.png)

#

# SQL 审计

访问模式为高安全模式时，可选择是否开启 SQL 审计功能。

云数据库 Percona 开启日志审计后，会统计所有 DML 和 DDL 操作信息。

SQL 审计不会解析实际的参数值，并且在 SQL 查询量较大的时候会丢失少量的记录。因此通过这种方式来统计准确的增量数据可能会出现不准确的情况。

## 注意事项

* 
实例开启高安全模式，才会显示 SQL 审计功能。
* 
通过控制台 DMS 工具执行 SQL 语句不会包含在 SQL 审计中。

## 操作步骤

1、登录[云数据库 RDS 管理控制台](https://rds-console.jdcloud.com/database) []()。

2、选择需要查询 SQL 审计的目标实例，点击目标实例，进入实例详情页，切换至 **SQL 审计** Tab 页，SQL 审计查询功能说明如下。

* 
执行时间：可以选择从当前时间往前推一个月的时间区间，作为 SQL 审计查询的时间段。
* 
数据库：可以查看指定数据库的 SQL 语句。
* 
账号：可以查看指定账号的 SQL 语句。
* 
关键字：您可以指定关键字作为 SQL 语句的过滤条件，只显示匹配关键字的 SQL 语句。

![image2018-3-9 16_31_11.png](https://img1.jcloudcs.com/cms/0fb72d45-8e54-4ef9-a4c1-a1af3b66421020180319113956.png)

3、点击 **查询** 按钮，查看符合要求的 SQL 列表。