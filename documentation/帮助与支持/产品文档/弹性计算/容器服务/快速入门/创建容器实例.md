# **创建容器实例**

**前提条件**

在创建容器实例前，您需要完成以下步骤

* 
注册京东云账号并激活、认证账号，可分别访问[注册京东云](https://uc.jdcloud.com/reg)、[登录京东云](https://uc.jdcloud.com/login)、[实名认证](https://uc.jdcloud.com/account/certify)进行操作；
* 
若您需要创建按配置计费实例，您需要保证您的余额不低于50元，若当前余额不足请进行[充值](https://uc.jdcloud.com/cost/capital/topUp)；
* 
您必选先创建[私有网络](https://www.jdcloud.com/help/detail/1527/isCatalog/1)、[子网](https://www.jdcloud.com/help/detail/1542/isCatalog/1)；
* 
若您需要使用安全组进行实例的安全访问控制，您可预先[创建安全组](https://www.jdcloud.com/help/detail/1486/isCatalog/1)或重新配置安全组[出站规则](https://www.jdcloud.com/help/detail/1490/isCatalog/1)、[入站规则](https://www.jdcloud.com/help/detail/1489/isCatalog/1)。

****

**操作步骤**

1. 
打开控制台，选择[弹性计算>>容器服务>>容器实例](https://console.jdcloud.com/host/container/list)；
1. 
选择创建容器实例所属地域，点击“创建”按钮，进入[容器实例购买页面](https://console.jdcloud.com/host/container/create?dataCenter=cn-north-1)，建议您根据业务情况选择实例所在地域及可用区；

备注：目前只支持华北-北京地域，提供可用区A和可用区B两个可用区，其他地域上线时间，敬请期待。

![image.png](https://img1.jcloudcs.com/cms/cd92e610-02e3-438a-bbdf-ed07211355a420171228220312.png)
1. 
**选择计费模式**：包年包月和按配置计费，包年包月按月付费购买资源，按配置计费按实际使用的时长（精确至秒）进行计费。关于两种计费方式的区别，请查阅[计费规则](https://www.jdcloud.com/help/detail/1940/isCatalog/1)。

![1.png](https://img1.jcloudcs.com/cms/b0b59022-af57-4363-9ecc-1364bbbc99e920171228170458.png)
1. 
**地域与可用区选择**：在此步骤仍可以选择容器对应的地域（华北-北京）及可用区，请注意“不同地域资源内网不互通，创建之后不可更改”，如果所选地域限额已满，可以通过[提交工单](https://uc.jdcloud.com/myorder/form?cateId=1&questionId=251)提升限额。

![1.png](https://img1.jcloudcs.com/cms/b74b388e-d35d-49f7-9ff6-c89f81e0668c20171228170636.png)
1. 
**选择镜像**：

镜像仓库：docker.io或仓库认证信息对应的镜像仓库地址。默认为docker.io，选择docker.io将基于Docker Hub提供的公有镜像创建容器；选择仓库认证信息后将基于对应的镜像仓库提供的公有或私有镜像创建容器。未添加任何仓库认证信息时，京东云将默认使用Docker Hub获取容器镜像；如需使用第三方私有镜像仓库，您需要先将仓库认证信息添加到京东云，选择添加第三方镜像仓库认证信息到京东云。使用在Docker Hub创建的私有镜像，添加第三方仓库认证时，仓库域名建议该地址：https://index.docker.io

镜像名称：输入创建容器所需要的镜像名称，例：library/nginx

镜像版本：如果不输入，默认版本为latest；如需要其他版本，请输入版本名称。

![1.png](https://img1.jcloudcs.com/cms/465b0e16-32cb-4c7a-a22e-13136e4eba6c20171228231510.png)
1. 
**选择规格**

京东云云主机的配置支持用户自定义选择：提供1核1G到56核448G（目前32核256G、54核112G、54核224G、54核448G的配置暂未开放），提供通用型、计算优化型、内存优化型三种类型，用户可以根据不同业务场景选择实例规格及相应配置，详细请查阅[实例配置推荐](https://www.jdcloud.com/help/detail/1992/isCatalog/1)

![1.png](https://img1.jcloudcs.com/cms/4d90955b-ef7c-47e1-b7e0-b234a324da2420171228232413.png)

选择其他实例，请选择更换实例规则，进行选择：

![1.png](https://img1.jcloudcs.com/cms/11870687-4a89-4d59-ba5c-e988bd69e54c20171228232643.png)
1. 
**存储**：京东云提供云硬盘作为容器的系统盘和数据盘，云硬盘是采用一盘多备的分布式存储方式，数据可靠性高

系统盘：目前只支持SSD云盘，容量范围为10-100G；系统盘文件系统格式支持xfs或ext4，创建容器时将根据已选择的文件系统格式对容器的系统盘进行格式化；系统盘的挂载目录为根目录“/”且不可修改；目前系统盘必须跟随容器删除；

数据盘：支持挂载七块数据盘，可选高效云盘和SSD云盘，只支持创建时关联数据盘。

高效云盘做数据盘：支持范围20G~3000G

SSD云盘做数据盘：支持范围20G~1000G

云硬盘费用与实例独立，具体价格信息请查阅[云硬盘价格](https://www.jdcloud.com/help/detail/1953/isCatalog/1)。

![TimLine截图20180202102633.png](https://img1.jcloudcs.com/cms/ee830a4f-05f0-4c44-b453-78231800449f20180202102657.png)
1. 
**选择网络**

选择“私有网络”及“子网”，选择子网后，可以判断该子网下，还有可以创建的云主机数量，如果暂时没有子网，可以通过快速入口新建子网，并在“云主机网络”进行选择，详细请查阅[私有网络和子网](https://www.jdcloud.com/help/detail/464/isCatalog/1)。

内网IP：有两种模式自动分配和自定义。默认为自动分配，将由系统为容器自动分配内网IP，且不可修改；可选择自定义，需要输入内网IP，在您子网CIDR指定内网IP范围内的IP地址，若选择自定义内网IP，暂不支持批量创建容器实例。

选择对应的已创建的安全组，安全组为必选项，安全组也可以通过快速入口创建，详细请查阅[创建安全组](https://www.jdcloud.com/help/detail/1557/isCatalog/1)，完成创建后，在“网络”进行选择。

![1.png](https://img1.jcloudcs.com/cms/fa11f3c5-3033-4050-8f57-f1315278951c20171228233132.png)
1. 
**带宽**：

京东云提供的公网IP带宽类型为按固定带宽计费及按使用流量计费，按固定带宽计费按购买时设置的带宽上限值计费，而与您实例当前实时访问公网带宽无关，按使用流量计费则根据您实时访问公网的实际流量计费。目前在华北-北京只提供BGP。

带宽范围为：1Mbps~200Mbps，在创建容器实例过程中可以暂不购买公网IP，完成容器创建后，再进行绑定。

公网IP带宽费用与实例费用独立。具体价格信息请查阅[公网IP价格](https://www.jdcloud.com/help/detail/1957/isCatalog/1)。

实例计费方式公网带宽计费方式费用估算按配置按固定带宽配置费用，包括：实例规格（CPU 和内存的配置）、数据盘（如果有）、和公网IP带宽的费用。按使用流量公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU 和内存的配置）、数据盘（如果有）的费用及公网IP配置费。包年包月按固定带宽配置费用，包括：实例规格（CPU 和内存的配置）、数据盘（如果有）、和公网IP带宽的费用。按使用流量公网流量费用 + 配置费用。其中，配置费用包括：实例规格（CPU 和内存的配置）、数据盘（如果有）的费用及公网IP配置费。

![1.png](https://img1.jcloudcs.com/cms/e61d4126-3b02-4830-aa76-48f3c07217fc20171228233551.png)
1. 
**高级设置**

为非必填项，为您创建容器提供高级选项。你可以根据需要对高级设置中的选项进行选择性定义；

运行的命令：输入启动容器时运行的第一条Entrypoint指令，将覆盖镜像中设置的Entrypoint指令；

运行的参数：输入启动容器时运行的第一条CMD指令，将覆盖镜像中设置的CMD指令；如已在运行的命令中设置了Entrypoint指令，该条指令将会附加到Entrypoint指令的参数中被执行；

环境变量：设置容器运行时的环境变量。可以为每一个容器设置多组环境变量，每一组环境变量的键和值必须一一对应；容器启动后可使用env命令查看容器的环境变量；点击+按钮，添加一组环境变量；点击“删除”按钮删除一组环境变量；

工作目录：设置容器的工作目录。容器的工作目录必须是绝对路径，以/开始且不能包含“:”、“.”字符；如不设置，默认使用根目录“/”作为容器的工作目录

主机名：设置容器的主机名；如不设置，则使用容器ID作为主机名；

启动项：点击按钮开启或关闭TTY；默认情况下TTY为关闭状态；开启后将为容器分配一个伪终端，打印容器的Stdin、Stdout、Stderror信息；

![1.png](https://img1.jcloudcs.com/cms/eb9e149d-8374-415f-9919-0270ccd6160f20171228233721.png)
1. 
**域名和IP映射**

为非必填项，在容器hosts文件中增加一组域名和IP映射；点击删除按钮，删除一组域名和IP映射；点击+按钮，增加一组域名和IP映射。

**![1.png](https://img1.jcloudcs.com/cms/7efc2f20-2b73-483d-8d46-bcfee3da2c6920171228233809.png)
**
1. 
**基本信息**

名称：为必填项，只支持中文、数字、大小写字母、英文下划线“_”及中划线“-”，且不能超过32字符；如果为批量创建购买，名称会以“xxx1”、“xxx2”依次显示。

描述：为非必填项，您可按需设置，容器描述最长不能超过256字符；

![1.png](https://img1.jcloudcs.com/cms/42c40867-a4f0-4992-ab36-c640b35a343920171228233854.png)
1. 
**.确认容器数量及购买时长**

购买数量受限该地域您容器、云硬盘、公网IP限额以及所选子网剩余IP数量，若限额不够，可通过[提交工单](https://uc.jdcloud.com/myorder/submit)提升限额。

若购买包年包月实例，则需要设置购买时长，最短为1个月，最长为3年。若需要更长服务时长请[提交工单](https://uc.jdcloud.com/myorder/form?cateId=1&questionId=251)。

![1.png](https://img1.jcloudcs.com/cms/e3b9c465-f185-4a39-bd33-101d7b0a172c20171228233945.png)
1. 
完成容器相关配置之后，点击【立即购买】完成支付后即可进入[控制台>>弹性计算>>容器服务>>容器实例](https://console.jdcloud.com/host/container/list?dataCenter=cn-north-1)**，**查看创建的容器。

![1.png](https://img1.jcloudcs.com/cms/54171dce-69e6-4498-9644-1f66b3b3ad0a20171228234244.png)

****