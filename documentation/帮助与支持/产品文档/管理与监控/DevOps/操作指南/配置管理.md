## **配置管理**

****

## **1. 前言**

## 配置管理是DevOps的基础模块，在DevOps中扮演着CMDB的角色，为DevOps其他模块提供各种运维场景的配置数据服务。

## 配置管理提供服务树结构创建与管理、统一权限控制以及主机导入与分配等基础服务，用户可根据组织的业务架构，轻松地创建和管理应用。

## **2. 术语定义**

## **服务树**

## 服务树是一个可视化拓扑的树结构，存储着业务组织架构信息。一方面，它以JNS服务为支持，按照“部门-产品线-系统-应用-分组-实例”的层级关系维护主机和实例的对应关系（分组和实例级未在服务树中展示），为其他系统提供统一准确的服务数据信息，另一方面， 用户可基于服务树实现角色管理和基于角色的统一权限控制，是Ark系统的基础。

## • 部门：用户可灵活定义并划分部门，如可以是实际组织中的一个二级或三级部门。

## • 产品线：产品线是一个完整的产品或服务，如一个部门下可能有多个产品线或业务。

## • 系统：系统是一个包含多个应用的集合，可以是一个独立的产品或产品的一个主要分支。

## • 应用：应用可以是一个大的功能模块，也可以是一个小的功能点，用户可按实际业务情况进行定义与创建。

## • 分组：一个应用可以创建多个不同生产环境或不同用途的分组，分别对每个分组添加机器，进行管理与部署。

## **名字服务**

## 提供“App--运行实例--主机间”的映射，对服务树各层级结构实现关联管理及App之间的关系解耦，是运维最基础的元数据。

## **资源池**

## 为了更好地管理主机，分配主机，引入了资源池的概念资源池功能主要的作用是进行主机归属分配，即将主机资源从外部（IDC或者手工）导入到二级部门，再将主机从二级部门分配到具体的产品线。

## **3. 产品功能**

**1) 维护产品线**

点击部门名称右边的“ +添加产品线”，即可打开添加产品线页面。点击相应的产品线，即可对其进行编辑和删除，删除时须先删除该产品线的系统。

**2**)**维护系统**

点击产品线名称右边的“ +添加系统”，即可打开添加系统页面。点击相应的系统，即可对其进行编辑和删除，删除时须先删除该系统下的所有应用。

**3**)**维护应用**

点击系统名称右边的“ +添加应用”，即可打开添加应用页面。

点击相应的应用，即可对其进行编辑和删除，删除时须先删除该应用下的所有分组。

**4**)**导入主机**

主机资源包括京东云主机、物理机及其他厂商云主机。如您的账户已经关联京东云控制台账户，可使用快速导入的方式直接勾选控制台中的云主机至DevOps平台中用于部署。

方法一：快速导入，服务树中选择需要导入的产品线，点击 快速导入 按钮，在导入页面选择云主机所属地域，选择需要的云主机即可。

方法二：批量导入，服务树中选择需要导入的产品线，根据提供的导入模板正确填写主机信息点击确定即可。

![资源池.png](https://img1.jcloudcs.com/cms/f8a392a3-b75c-4acc-b665-d33067671fe720180417150045.png)

**5**)**维护分组和实例**

添加应用时，完成【基本设置】和【角色设置】并保存后，即可对应用添加分组及各分组下的实例，添加的主机可在主机列表页看到。

选择相应的应用，即可在右侧编辑分组和实例，删除分组时须先删除分组下的实例。

![分组.png](https://img1.jcloudcs.com/cms/24a15a96-1725-4871-87ba-1b3f9db07c5b20180417150100.png)